(this["webpackJsonpwebex-react-oauth-sample"]=this["webpackJsonpwebex-react-oauth-sample"]||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(11),a=n.n(s),i=(n(16),n(0));var o=function(e){var t=e.clientID,n=e.loginText,r=e.redirectURI,c=e.webexAPIBaseURL;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("a",{href:"".concat(c,"?client_id=").concat(t,"&response_type=token&redirect_uri=").concat(r,"&scope=identity%3Agroups_rw%20identity%3Agroups_read"),children:n})})},u=n(2),p=n.n(u),l=n(4),d=n(3);function j(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://webexapis.com/v1/groups",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:throw r=e.sent,new Error("Error! status: ".concat(n.status,", message: ").concat(r.message));case 8:return e.next=10,n.json();case 10:return c=e.sent,console.log("result is: ",JSON.stringify(c,null,4)),e.abrupt("return",c.groups);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(p.a.mark((function e(t,n){var r,c,s,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,fetch("https://webexapis.com/v1/groups/".concat(n,"?includeMembers=").concat(r),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});case 3:if((c=e.sent).ok){e.next=9;break}return e.next=7,c.json();case 7:throw s=e.sent,new Error("Error! status: ".concat(c.status,", message: ").concat(s.message));case 9:return e.next=11,c.json();case 11:return a=e.sent,console.log("result is: ",JSON.stringify(a,null,4)),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(p.a.mark((function e(t,n){var r,c,s,a,i,o,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.displayName,c=n.description,s=n.members,a=s.split(",").map((function(e){return{id:e}})),i={displayName:r,description:c,members:a},e.next=5,fetch("https://webexapis.com/v1/groups",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:if((o=e.sent).ok){e.next=11;break}return e.next=9,o.json();case 9:throw u=e.sent,new Error("Error! status: ".concat(o.status,", message: ").concat(u.message));case 11:return e.next=13,o.json();case 13:return l=e.sent,console.log("result is: ",JSON.stringify(l,null,4)),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(p.a.mark((function e(t,n){var r,c,s,a,i,o,u,l,d,j,b,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.groupID,c=n.displayName,s=n.description,a=n.membersAdd,i=void 0===a?[]:a,o=n.membersDelete,u=void 0===o?[]:o,l=null===i||void 0===i?void 0:i.map((function(e){return{id:e,operation:"add"}})),u.forEach((function(e){l.push({id:e,operation:"delete"})})),d={displayName:c,description:s,members:l},e.next=6,fetch("https://webexapis.com/v1/groups/".concat(r),{method:"PATCH",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(d)});case 6:if((j=e.sent).ok){e.next=12;break}return e.next=10,j.json();case 10:throw b=e.sent,new Error("Error! status: ".concat(j.status,", message: ").concat(b.message));case 12:return e.next=14,j.json();case 14:return h=e.sent,console.log("result is: ",JSON.stringify(h,null,4)),e.abrupt("return",h);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(5),w=n(6),y=n.n(w);function k(e){var t,n,c=e.newGroup,s=void 0!==c&&c,a=e.onSave,o=e.group,u=Object(r.useState)(Object(g.a)({id:"",displayName:"",description:"",members:[]},o)),p=Object(d.a)(u,2),l=p[0],j=p[1],b=Object(r.useState)(""),h=Object(d.a)(b,2),f=h[0],m=h[1],x=function(e,t){var n=e.target,r=Object(g.a)({},l);r[t]=n.value,j(r)};return Object(i.jsxs)("div",{children:[Object(i.jsxs)("h2",{children:[s&&"New "," Group Editor"]}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:["Group ID: ",s?"< new group >":l.id]}),Object(i.jsxs)("li",{children:["Display Name ",Object(i.jsx)("input",{type:"text",value:l.displayName,onChange:function(e){return x(e,"displayName")}})]}),Object(i.jsxs)("li",{children:["Description ",Object(i.jsx)("input",{type:"text",value:l.description,onChange:function(e){return x(e,"description")}})]}),Object(i.jsxs)("li",{children:["Members (",(null===(t=l.members)||void 0===t?void 0:t.length)||0,")",Object(i.jsxs)("ul",{children:[null===(n=l.members)||void 0===n?void 0:n.map((function(e,t){return Object(i.jsxs)("li",{children:[e,Object(i.jsx)("button",{onClick:function(){return function(e){var t=Object(g.a)({},l);t.members=t.members.filter((function(t){return t!==e})),j(t)}(e)},children:"remove"})]},t)})),Object(i.jsxs)("li",{children:[Object(i.jsx)("input",{type:"text",placeholder:"Member ID to Add",value:f,onChange:function(e){var t=e.target;m(t.value)}}),Object(i.jsx)("button",{onClick:function(){var e=Object(g.a)({},l);e.members.push(f),j(e),m("")},children:"Add"})]})]})]}),Object(i.jsx)("li",{children:Object(i.jsxs)("button",{onClick:function(){a(l)},children:[s?"Save":"Update"," Group"]})})]})]})}k.props={newGroup:y.a.bool,onSave:y.a.func.isRequired,group:y.a.object.isRequired},k.defaultProps={newGroup:!0};var N=k;n(21);var S=function(e){var t=e.token,n=Object(r.useState)(null),c=Object(d.a)(n,2),s=c[0],a=c[1],o=Object(r.useState)(!1),u=Object(d.a)(o,2),b=u[0],f=u[1],x=Object(r.useState)(!1),O=Object(d.a)(x,2),g=O[0],w=O[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),S=k[0],A=k[1],E=Object(r.useState)(null),I=Object(d.a)(E,2),G=I[0],C=I[1],D=Object(r.useState)(null),_=Object(d.a)(D,2),T=_[0],P=_[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),A(""),e.prev=2,e.next=5,j(t);case 5:n=e.sent,a(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),A(e.t0.message);case 12:return e.prev=12,f(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var B=function(){var e=Object(l.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(""),e.prev=1,e.next=4,m(t,n);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),A(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(p.a.mark((function e(n){var r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),P(null),A(""),e.prev=3,e.next=6,h(t,n,!0);case 6:c=e.sent,s={id:c.id,displayName:c.displayName,description:c.description||"",members:null===(r=c.members)||void 0===r?void 0:r.map((function(e){return e.id}))},P(s),C(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),A(e.t0.message);case 15:return e.prev=15,w(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(p.a.mark((function e(n){var r,c,s,a,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(""),e.prev=1,c=n.members,s=G.members.filter((function(e){return!n.members.includes(e)})),a={groupID:n.id,displayName:n.displayName,description:n.description,membersAdd:c,membersDelete:s},e.next=7,v(t,a);case 7:i=e.sent,o={id:i.id,displayName:i.displayName,decription:i.description||"",members:null===(r=i.members)||void 0===r?void 0:r.map((function(e){return e.id}))},P(o),C(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),A(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"groups",children:[S&&Object(i.jsx)("div",{className:"section",children:Object(i.jsx)("h3",{className:"error",children:S})}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("h2",{children:"My Groups"}),b&&Object(i.jsx)("div",{children:"Loading groups..."}),s&&Object(i.jsx)("ul",{children:s.map((function(e){return Object(i.jsxs)("li",{children:[e.displayName,Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:["ID: ",e.id]}),Object(i.jsxs)("li",{children:["Description:  ",e.description]}),Object(i.jsx)("li",{children:Object(i.jsx)("button",{onClick:function(){return J(e.id)},children:"Edit"})})]})]},e.id)}))}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)("h3",{children:"Group Editor"}),g&&Object(i.jsx)(i.Fragment,{children:"Loading Group Details..."}),T&&Object(i.jsx)(N,{newGroup:!1,group:T,onSave:L})]})]}),Object(i.jsx)("div",{className:"section",children:Object(i.jsx)(N,{newGroup:!0,onSave:B})})]})};var A=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e="".concat(window.location.protocol,"//").concat(window.location.host);window.location.pathname&&(e+=window.location.pathname),e=e.endsWith("/")?e.slice(0,-1):e,c(encodeURIComponent(e))}),[]),n},E=n(9),I=n.n(E);var G=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],s=window.location.hash;return Object(r.useEffect)((function(){if(!n&&s){var e=I.a.parse(s);e.access_token&&c(e.access_token),["access_token","token_type","expires_in","refresh_token","refresh_token_expires_in"].forEach((function(t){return Reflect.deleteProperty(e,t)})),window.location.hash=I.a.stringify(e)}}),[n,s]),n};n(36);var C=function(){var e=G(),t=A();return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("h1",{children:"Webex Groups"}),Object(i.jsxs)("h3",{children:["A GUI Interface for the ",Object(i.jsx)("a",{href:"https://developer.webex.com/docs/api/v1/groups",children:"Webex Groups API"})]})]}),Object(i.jsx)("div",{className:"Main",children:e?Object(i.jsx)(S,{token:e}):Object(i.jsxs)("div",{className:"Login",children:["To use this tool, login with an organization admin user: ",Object(i.jsx)(o,{clientID:"C81470a02c026b1300396bdfde1fd359ce2ed3c1c44a598b47d5583d7cf4f9916",loginText:"Login to Webex",redirectURI:t,webexAPIBaseURL:"https://webexapis.com/v1/authorize"})]})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(C,{})}),document.getElementById("root")),D()}},[[37,1,2]]]);
//# sourceMappingURL=main.a69bdb5c.chunk.js.map